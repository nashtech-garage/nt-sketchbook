name: PR Metrics

on:
    pull_request:
        types: [opened]

jobs:
    pr-metrics:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout Code
              uses: actions/checkout@v4

            - name: Fetch PR Metrics
              run: |
                  PR_NUMBER=${{ github.event.pull_request.number }}
                  echo "PR Number: $PR_NUMBER"

                  curl -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
                       -H "Accept: application/vnd.github.v3+json" \
                       https://api.github.com/repos/${{ github.repository }}/pulls/$PR_NUMBER | jq '.'

            - name: Post Metrics as PR Comment
              uses: thollander/actions-comment-pull-request@v2
              with:
                  message: 'ðŸš€ PR Metrics updated! Check details above.'
